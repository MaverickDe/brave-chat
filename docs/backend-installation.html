<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Brave Chat Docs.</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      content="Brave Chat is the ultimate open source slack alternative."
      name="description"
    />
    <meta content="Mahmoud Harmouch" name="author" />
    <meta name="keywords" content="Brave Chat documentation" />
    <link rel="shortcut icon" href="static/images/favicon.ico" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      type="text/css"
      id="bootstrap-style"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <link
      href="static/style.css"
      id="app-style"
      rel="stylesheet"
      type="text/css"
    />
  </head>
  <body data-spy="scroll" data-target=".left-side-nav" data-offset="180">
    <div data-simplebar class="h-100">
      <div id="navbar-include"></div>
    </div>
    <div class="main-content g-0 g-md-1 mb-3">
      <div class="pt-5 pb-5 ps-3 pe-3 mt-5 mb-5 ms-0 position-relative">
        <div class="container-fluid">
          <div class="row">
            <div class="col-lg-12">
              <div class="card mt-3">
                <div class="card-body">
                  <div class="d-xl-flex">
                    <div class="w-100">
                      <div class="p-lg-1">
                        <div class="mb-5">
                          <div class="mb-5">
                            <h4 class="mt-0 mb-4 d-flex align-items-center">
                              <span class="material-icons"> forward </span>
                              Installation
                            </h4>

<h5 class="mt-0 mb-4 d-flex align-items-center"><span class="material-icons"> forward </span> Development Requirements</h5>
<ul>
<li>Make (GNU command)</li>
<li>Python (&gt;= 3.8)</li>
<li>Poetry (1.2)</li>
</ul>
<h5 class="mt-0 mb-4 d-flex align-items-center"><span class="material-icons"> forward </span> Project Structure</h5>
<details>
<summary><code class="text-decoration-none text-primary fw-bold">❯ tree app</code></summary>


<div><xmp class="bg-dark text-white ps-4">  
.
├── auth     # Package contains different config files for the `auth` app.
│   ├── crud.py     # Module contains different CRUD operations performed on the database.
│   ├── models.py     # Module contains different data models for ORM to interact with database.
│   ├── router.py     # Module contains different routes for this api.
│   └── schemas.py     # Module contains different schemas for this api for validation purposes.
├── chats     # Package contains different config files for the `chats` app.
│   ├── crud.py     # Module contains different CRUD operations performed on the database.
│   ├── models.py     # Module contains different data models for ORM to interact with database.
│   ├── router.py     # Module contains different routes for this api.
│   └── schemas.py     # Module contains different schemas for this api for validation purposes.
├── config.py     # Module contains the main configuration settings for project.
├── contacts     # Package contains different config files for the `contacts` app.
│   ├── crud.py     # Module contains different CRUD operations performed on the database.
│   ├── models.py     # Module contains different data models for ORM to interact with the database.
│   ├── router.py     # Module contains different routes for this api.
│   └── schemas.py     # Module contains different schemas for this api for validation purposes.
├── __init__.py
├── main.py     # Startup script. Starts uvicorn.
├── rooms     # Package contains different config files for the `rooms` app.
│   ├── crud.py     # Module contains different CRUD operations performed on the database.
│   ├── models.py     # Module contains different models for ORMs to inteact with database..
│   ├── router.py     # Module contains different routes for this api.
│   └── schemas.py     # Module contains different schemas for this api for validation purposes.
├── users     # Package contains different config files for the `users` app.
│   ├── crud.py     # Module contains different CRUD operations performed on the database.
│   ├── models.py     # Module contains different models for ORMs to inteact with database..
│   ├── router.py     # Module contains different routes for this api.
│   └── schemas.py     # Module contains different schemas for this api for validation purposes.
├── utils     # Package contains different common utility modules for the whole project.
│   ├── constants.py
│   ├── crypt_util.py
│   ├── db_utils.py     # A utility script that create, drop a test database used in the tests package.
│   ├── dependencies.py     # A utility script that yield a session for each request to make the crud call work.
│   ├── engine.py     # A utility script that initialize two sqlalchemy engines and set them as app state variables.
│   ├── full_text_search.py     # A utility script to make sqlalchemy and singlestore compatible for implementing full text search on a given table.
│   ├── jwt_util.py     # A utility script for JWT.
│   ├── mixins.py     # A utility script that contains common mixins for different models.
│   └── pub_sub_handlers.py     # A utility script that contains publishers and consumers handlers for the redis queue.
└── web_sockets     # Package contains different config files for the `web_sockets` app.
    └── router.py     # Module contains different routes for the websockets.</code>

</div></xmp>

</details>

<h5 class="mt-0 mb-4 d-flex align-items-center"><span class="material-icons"> forward </span> Installation with Make</h5>
<p>The best way to configure, install main dependencies, and run the project is by using <code>make</code>. So, make sure you have <code>make</code> installed and configured on your machine. If it is not the case, head over to <a class="text-decoration-none text-primary fw-bold" href="https://stackoverflow.com/questions/32127524/how-to-install-and-use-make-in-windows">this thread</a> on stackoverflow to install it on windows, or <a class="text-decoration-none text-primary fw-bold" href="https://stackoverflow.com/questions/11494522/installing-make-on-mac">this thread</a> to install it on Mac OS.</p>
<p>Having <code>make</code> installed and configured on your machine, you can now run <code>make</code> under the root directory of this project to explore different available commands to run:</p>
<div>
<xmp class="bg-dark text-white ps-4">
make

Please use 'make <target>' where <target> is one of:

venv                     Create a virtual environment
install                  Install the package and all required core dependencies
run                      Running the app locally
deploy-deta              Deploy the app on a Deta Micro
clean                    Remove all build, test, coverage and Python artifacts
lint                     Check style with pre-commit
test                     Run tests quickly with pytest
test-all                 Run tests on every Python version with tox
coverage                 Check code coverage quickly with the default Python

</xmp>
</div>
<h5 id="1-create-a-virtualenv">1. Create a virtualenv</h5>
<div>
<xmp class="bg-dark text-white ps-4">
make venv

</xmp>
</div>
<h5 id="2-activate-the-virtualenv">2. Activate the virtualenv</h5>
<div>
<xmp class="bg-dark text-white ps-4">
source .venv/bin/activate

</xmp>
</div>
<h5 id="3-install-dependencies">3. Install dependencies</h5>
<div>
<xmp class="bg-dark text-white ps-4">
make install

</xmp>
</div>
<p><strong>Note</strong>: <em>This command will automatically generate a <code>.env</code> file from <code>.env.example</code>, uninstall the old version of poetry on your machine, then install latest version <code>1.2.2</code>, and install the required main dependencies.</em></p>
<h5 id="4-setup-a-singlestore-account">4. Set up a SingleStore account</h5>
<p>You can refer to <a class="text-decoration-none text-primary fw-bold" href="https://dev.to/wiseai/a-deep-dive-into-connecting-fastapi-with-singlestore-2dn8#setting-up-singlestore">this tutorial</a> to create a SingleStore account and a MySQL <code>chat</code> database.</p>
<h5 id="5-set-your-singlestore-credentials">5. Set your SingleStore Credentials</h5>
<p>Fill in the following environment variables in your .env file accordingly:</p>
<div>
<xmp class="bg-dark text-white ps-4">
# Database
SINGLESTORE_USERNAME=admin
SINGLESTORE_PASSWORD=<database password>
SINGLESTORE_HOST=<database name>
SINGLESTORE_PORT=3306
SINGLESTORE_DATABASE=<database name>

</xmp>
</div>
<h5 id="6-setup-a-redis-account">6. Set up a Redis account</h5>
<p>Create a free account on <a class="text-decoration-none text-primary fw-bold" href="https://redis.info/try-free-dev-to">Redis Cloud</a>.</p>
<h5 id="7-set-your-redis-cloud-credentials">7. Set your Redis Cloud Credentials</h5>
<p>Set the following environment variables in your .env file according to your account credentials:</p>
<div>
<xmp class="bg-dark text-white ps-4">
# REDIS
# USER IN REDIS CLOUD
REDIS_USERNAME=default
# DATABASE PASSWORD
REDIS_PASSWORD=<database password>
# REDIS HOST
REDIS_HOST=<redis url>
# REDIS PORT
REDIS_PORT=15065

</xmp>
</div>
<h5 id="8-generate-a-secret-key">8. Set up a Deta project</h5>
<p>Create a free account on <a class="text-decoration-none text-primary fw-bold" href="https://www.deta.sh/">Deta</a> and create a new project.</p>
<h5 id="9-set-your-deta-project-key">9. Set your Deta project key</h5>
<p>Set the following environment variable in your <code>.env</code> file according to your project key value:</p>
<div>
<xmp class="bg-dark text-white ps-4">
# Deta
DETA_PROJECT_KEY=

</xmp>
</div>
<h5 id="10-generate-a-secret-key">10. Generate a secret key</h5>
<p>Generate a secret key using openssl and update its env var in .env file.</p>
<div>
<xmp class="bg-dark text-white ps-4">
openssl rand -hex 128

</xmp>
</div>

<pre class="bg-dark text-white ps-4"><code class="lang-sh">
afa1639545d53ecf83c9f8acf4704abe1382f9a9dbf76d2fd229d4795a4748712dbfe7cf1f0a812f1c0fad2d47c8343<span class="hljs-built_in">cd</span>1017b22<span class="hljs-built_in">fc</span>3bf43d052307137f6ba68<span class="hljs-built_in">cd</span>2cb69748b561df846873a6257e3569d6307a7e022b82b79cb3d6e0fee00553d80913c1dcf946e2e91e1dfcbba1ed9f34c9250597c1f70f572744e91c68cbe76
</code></pre>
<pre class="bg-dark text-white ps-4"><code class="lang-yaml"><span class="hljs-comment"># App config:</span>
<span class="hljs-attr">JWT_SECRET_KEY</span>=afa1639545d53ecf83c9f8acf4704abe1382f9a9dbf76d2fd229d4795a4748712dbfe7cf1f0a812f1c0fad2d47c8343cd1017b22fc3bf43d052307137f6ba68cd2cb69748b561df846873a6257e3569d6307a7e022b82b79cb3d6e0fee00553d80913c1dcf946e2e91e1dfcbba1ed9f34c9250597c1f70f572744e91c68cbe76
<span class="hljs-attr">DEBUG</span>=<span class="hljs-literal">False</span>
</code></pre>
<h5 id="11-run-localhost">11. Run Localhost</h5>
<pre class="bg-dark text-white ps-4"><code class="lang-sh">make <span class="hljs-keyword">run</span><span class="bash"></span>
</code></pre>
<h5 class="mt-0 mb-4 d-flex align-items-center"><span class="material-icons"> forward </span> Running locally with Compose v2</h5>
<p>Make sure your have <a class="text-decoration-none text-primary fw-bold" href="https://github.com/docker/compose">compose v2</a> installed and configured on your machine, and run the following command to build the predefined docker services(make sure you have a .env file beforehand):</p>
<p><strong>Using Make</strong></p>
<pre class="bg-dark text-white ps-4"><code class="lang-sh"><span class="hljs-attribute">make docker-build</span>
</code></pre>
<p>or simply running:</p>
<pre class="bg-dark text-white ps-4"><code><span class="hljs-attribute">docker compose build</span>
</code></pre><p>Once that is done, you can spin up the container:</p>
<p><strong>Using Make</strong></p>
<pre class="bg-dark text-white ps-4"><code class="lang-sh"><span class="hljs-keyword">make</span> <span class="hljs-keyword">up</span>
</code></pre>
<p>or running:</p>
<pre class="bg-dark text-white ps-4"><code><span class="hljs-attribute">docker compose up</span>
</code></pre><h5 class="mt-0 mb-4 d-flex align-items-center"><span class="material-icons"> forward </span> Access Swagger Documentation</h5>
<blockquote>

<p><a class="text-decoration-none text-primary fw-bold" href="http://localhost:8000/docs">http://localhost:8000/docs</a></p>
</blockquote>
<div class="outer">
  <figure class="img1 embed news">
    <img
      src="./static/images/swagger.png"
      alt="Swagger redocs."
    />
    <figcaption class="outer">
      Swagger redocs.
    </figcaption>
  </figure>
</div>
<h5 class="mt-0 mb-4 d-flex align-items-center"><span class="material-icons"> forward </span> Access Redocs Documentation</h5>
<blockquote>
<p><a class="text-decoration-none text-primary fw-bold" href="http://localhost:8000/redocs">http://localhost:8000/redocs</a></p>
</blockquote>
<div class="outer">
  <figure class="img1 embed news">
    <img
      src="./static/images/swagger-redocs.png"
      alt="Swagger redocs."
    />
    <figcaption class="outer">
      Swagger redocs.
    </figcaption>
  </figure>
</div>
<h5 class="mt-0 mb-4 d-flex align-items-center"><span class="material-icons"> forward </span> Access Prometheus Metrics</h5>
<blockquote>
<p><a class="text-decoration-none text-primary fw-bold" href="http://localhost:8000/metrics">http://localhost:8000/metrics</a></p>
</blockquote>
<h5 class="mt-0 mb-4 d-flex align-items-center"><span class="material-icons"> forward </span> Access Grafana Dashboard</h5>
<blockquote>
<p><a class="text-decoration-none text-primary fw-bold" href="http://localhost:3001">http://localhost:3001</a></p>
</blockquote>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    <div id="footer-include"></div>
    </div>
    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/simplebar/6.0.0-beta.0/simplebar.min.js"></script>
    <script src="static/jquery.js"></script>
  </body>
</html>
